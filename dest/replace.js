/* tipograph (replace) v0.3.4 by Petr Nevyhoštěný - https://github.com/nevyk/tipograph (MIT licensed) */
!function(){var e={customRules:[],quotesFormat:"double-open-up double-close-up single-open-up single-close-up"},n=function(e,n){for(var o in n)n.hasOwnProperty(o)&&(e[o]=n[o]);return e},o=function(e){var n={"double-open-up":"“","single-open-up":"‘","double-close-up":"”","single-close-up":"’","double-open-down":"„","single-open-down":"‚","double-left":"«","single-left":"‹","double-right":"»","single-right":"›","double-left-space":"« ","single-left-space":"‹ ","double-space-right":" »","single-space-right":" ›","double-top-corner":"「","single-top-corner":"『","double-bottom-corner":"」","single-bottom-corner":"』"},o=e.split(" ");o[0]=n[o[0]]||n["double-open-up"],o[1]=n[o[1]]||n["double-close-up"],o[2]=n[o[2]]||n["single-open-up"],o[3]=n[o[3]]||n["single-close-up"];var t=o[0]+"$1"+o[1],p=o[2]+"$1"+o[3];return[t,p]},t=function(){this.escapes=[],this.counter=-1};t.prototype.escape=function(e){var n=/<(pre|code)[^>]*>[\S\s]*(?=<\/\1>)<\/\1>/gi,o=/(<(\S+)[^>]*>)([\S\s]*(?=<\/\2>))(<\/\2>)/g,t=/<[^>\d\s][^>]*>/g,p=this;this.escapes=[],this.counter=-1;for(var r=function(e){return p.counter++,p.escapes.push({pair:!1,content:e}),"#@"+p.counter+"&"};n.test(e);)e=e.replace(n,r);for(var s=function(e,n,o,t,r){return p.counter++,p.escapes.push({pair:!0,opening:n,closing:r}),"#^@"+p.counter+"&"+t+"#$@"+p.counter+"&"};o.test(e);)e=e.replace(o,s);for(;t.test(e);)e=e.replace(t,r);return e},t.prototype.unescape=function(e){for(var n,o,t=0;t<this.escapes.length;t++)o=this.escapes[t],o.pair?(n=new RegExp("#\\^@"+t+"&([\\S\\s]*)#\\$@"+t+"&","g"),e=e.replace(n,o.opening+"$1"+o.closing)):(n=new RegExp("#@"+t+"&","g"),e=e.replace(n,o.content));return e};var p=function(e){this.config={},n(this.config,e)};if(p.prototype.configure=function(e){n(this.config,e)},p.prototype.all=function(e){var n=new t;return e=n.escape(e),e=this.spaces(e,!1),e=this.quotes(e,!1),e=this.mathSigns(e,!1),e=this.hyphens(e,!1),e=this.symbols(e,!1),e=this.symbols(e,!1),n.unescape(e)},p.prototype.quotes=function(e,n){n="undefined"==typeof n?!0:n;var p,r=/'([^']*)'/g,s=/"([^"]*)"/g,c=/(\d)"/g,u=/(\d)'/g,a=/(\w)'(\w)/g,i=/\,\,/g,l=/(\s|^)\,([^'\s]*')/g;n&&(p=new t,e=p.escape(e));var g=o(this.config.quotesFormat);return e=e.replace(i,'"').replace(l,"$1'$2").replace(a,"$1’$2").replace(c,"$1″").replace(u,"$1′").replace(s,g[0]).replace(r,g[1]).replace(/'/g,"’"),n?p.unescape(e):e},p.prototype.spaces=function(e,n){n="undefined"==typeof n?!0:n;var o,p=/\u0020{2,}/g,r=/(\u00B6|\u00A7|\u00A9|\u2122|\u00AE)\u0020/g;return n&&(o=new t,e=o.escape(e)),e=e.replace(p," ").replace(r,"$1 "),n?o.unescape(e):e},p.prototype.hyphens=function(e,n){n="undefined"==typeof n?!0:n;var o,p=/\-\-/g,r=/\-\-\-/g,s=/\s\-\s/g,c=/(\d)\-(\d)/g,u=/([A-Z])\-([A-Z])/g;return n&&(o=new t,e=o.escape(e)),e=e.replace(r,"—").replace(p,"–").replace(c,"$1–$2").replace(s," – ").replace(u,"$1–$2"),n?o.unescape(e):e},p.prototype.mathSigns=function(e,n){n="undefined"==typeof n?!0:n;var o,p=/(\d\s)\-(\s\d)/g,r=/\-(\d)/g,s=/(\d\s)x(\s\d)/g,c=/(\d\s)\/(\s\d)/g,u=/\+\-/g,a=/\!\=|<>/g;return n&&(o=new t,e=o.escape(e)),e=e.replace(p,"$1−$2").replace(r,"−$1").replace(s,"$1×$2").replace(c,"$1÷$2").replace(u,"±").replace(a,"≠"),n?o.unescape(e):e},p.prototype.symbols=function(e,n){n="undefined"==typeof n?!0:n;var o,p=/(\s|^)\((C|c)\)\s?/g,r=/\((TM|tm)\)\s?/g,s=/\((R|r)\)\s?/g,c=/([^\.]|^)\.\.\.([^\.]|$)/g;return n&&(o=new t,e=o.escape(e)),e=e.replace(p,"$1© ").replace(r,"™ ").replace(s,"® ").replace(c,"$1…$2"),n?o.unescape(e):e},p.prototype.addCustomRule=function(e,n){if("string"!=typeof e&&!(e instanceof RegExp))throw"regexp must be a string or a regular expression";if("string"!=typeof n&&"function"!=typeof n)throw"replacement must be a string or a function";this.config.customRules.push({search:e,replacement:n})},p.prototype.custom=function(e,n){return n="undefined"==typeof n?!0:n,n&&(html=new t,e=html.escape(e)),this.config.customRules.forEach(function(n){e=e.replace(n.search,n.replacement)}),n?html.unescape(e):e},"object"==typeof module&&module.exports)module.exports=new p(e);else if("undefined"!=typeof window){var r=window.Tipograph||{};r.Replace=new p(e),window.Tipograph=r}}();